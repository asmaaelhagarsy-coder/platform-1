
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unit 1 Â· Lesson 3 â€” Now Starts Long Ago | Mini Platform</title>
  <style>
    :root{--bg:#f8fbff;--card:#ffffff;--ink:#16243d;--muted:#4f5b7a;--accent:#2ea5ff;--accent2:#ff7ac4;--accent3:#59d28f;--good:#31c48d;--bad:#ef4444}
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:var(--ink);margin:0}
    header{background:#fff;box-shadow:0 4px 10px rgba(0,0,0,.06)}
    header .wrap{display:flex;align-items:center;gap:12px;padding:14px 16px}
    .brand{font-weight:800}
    .subtitle{color:var(--muted);font-size:.9rem}
    .tabs{display:flex;gap:8px;padding:10px;background:linear-gradient(90deg,var(--accent),var(--accent2))}
    .tab-btn{border:none;padding:8px 10px;border-radius:10px;background:#fff;color:#0f1b33;font-weight:700;cursor:pointer}
    .tab-btn.active{background:var(--card);box-shadow:0 4px 12px rgba(0,0,0,.08)}
    main{padding:16px}
    section{display:none}
    section.active{display:block}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .card{background:var(--card);border-radius:16px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700}
    .pill.en{background:rgba(46,165,255,.14);color:#0b6b9d}
    .pill.ar{background:rgba(255,122,196,.18);color:#8a205e}
    .btn{border:none;border-radius:12px;padding:8px 10px;background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
    .btn.secondary{background:var(--accent3)}
    .btn.muted{background:#e7eef6;color:#29405a}
    .dictation{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
    .dict-row{display:grid;grid-template-columns:1fr 180px;gap:10px;margin-top:10px}
    input[type=text]{width:100%;padding:10px 12px;border:2px solid #e5eef7;border-radius:10px;outline:none;font-size:1rem}
    input.good{border-color:#31c48d;background:#ecfbf5}
    input.bad{border-color:#ef4444;background:#feecec}
    .dd-wrap{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .col{background:var(--card);border-radius:16px;padding:12px;min-height:220px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
    .chip{background:#eef7ff;color:#083a58;padding:10px;border-radius:12px;margin:6px 0;display:flex;justify-content:space-between;align-items:center}
    .chip[data-done="1"]{opacity:.55}
    .drop{background:#fffbe6;border:2px dashed #ffcf5f;padding:12px;border-radius:12px;min-height:40px}
    .mcq{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
    .q{margin:10px 0;font-weight:700}
    .opt{background:#eef7ff;padding:10px;border-radius:10px;margin:6px 0;cursor:pointer;border:2px solid transparent}
    .opt.correct{background:#ecfbf5;border-color:#31c48d}
    .opt.wrong{background:#feecec;border-color:#ef4444}
    .sentence{background:#fff;border-left:6px solid var(--accent2);padding:10px;border-radius:12px;margin:8px 0}
    .warn{display:none;background:#fff4e6;border:1px solid #ffd6a1;border-radius:10px;padding:8px 10px;color:#7a4a00;margin:8px 16px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div>
        <div class="brand">Unit 1 Â· Lesson 3 â€” Now Starts Long Ago</div>
        <div class="subtitle">British voice Â· Works offline</div>
      </div>
      <div class="panel" style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <label class="subtitle">Voice:</label>
        <select id="voiceSel"></select>
        <label class="subtitle">Rate:</label>
        <input id="rate" type="range" min="0.7" max="1.1" step="0.01" value="0.85" />
        <button class="btn" id="testVoice">ðŸ”ˆ Test</button>
      </div>
    </div>
    <div id="warn" class="warn">No British (enâ€‘GB) voice found. Install UK English voice or use Chrome/Edge.</div>
    <div class="tabs">
      <button class="tab-btn active" data-tab="vocab">Vocabulary</button>
      <button class="tab-btn" data-tab="games">Games</button>
      <button class="tab-btn" data-tab="reading">Reading</button>
      <button class="tab-btn" data-tab="grammar">Grammar</button>
    </div>
  </header>

  <main>
    <section id="vocab" class="active">
      <h2>Vocabulary Cards</h2>
      <div id="cards" class="grid"></div>
      <h3>Dictation â€” Type the English Word</h3>
      <div id="dict" class="dictation"></div>
    </section>

    <section id="games">
      <h2>Games</h2>
      <h3>Drag & Drop â€” Match Words to Meanings</h3>
      <div class="dd-wrap"><div class="col"><div id="dd-en"></div></div><div class="col"><div id="dd-ar"></div></div></div>
      <div class="row" style="margin-top:10px"><button class="btn" id="resetDD">Reset</button><div id="dd-score" class="small"></div></div>
      <hr/>
      <h3>Quick MCQ Quiz</h3>
      <div id="mcq" class="mcq"></div>
    </section>

    <section id="reading">
      <h2>Reading â€” 6 Simple Sentences</h2>
      <div id="readingBox"></div>
    </section>

    <section id="grammar"><h2>Grammar â€” Past Simple & Past Continuous</h2><div id="gQuiz" class="mcq"></div></section>
  </main>

  <script>
    const WORDS = [{"en": "ancient", "ar": "\u0642\u062f\u064a\u0645", "eg": "Ancient people recorded history in writing."}, {"en": "discover", "ar": "\u064a\u0643\u062a\u0634\u0641", "eg": "People discovered writing long ago."}, {"en": "progress", "ar": "\u062a\u0642\u062f\u0651\u0645", "eg": "Learning from the past supports progress."}, {"en": "technology", "ar": "\u062a\u0643\u0646\u0648\u0644\u0648\u062c\u064a\u0627", "eg": "Modern technology helps communication."}, {"en": "communicate", "ar": "\u064a\u062a\u0648\u0627\u0635\u0644", "eg": "Writing helped people communicate quickly."}, {"en": "interrupt", "ar": "\u064a\u064f\u0642\u0627\u0637\u0650\u0639", "eg": "The phone can interrupt a lesson."}, {"en": "accident", "ar": "\u062d\u0627\u062f\u0650\u062b", "eg": "He had an accident on the way to work."}, {"en": "arrive", "ar": "\u064a\u0635\u0644", "eg": "The guide arrived at two o\u2019clock."}, {"en": "past simple", "ar": "\u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0628\u0633\u064a\u0637", "eg": "We visited the museum yesterday."}, {"en": "past continuous", "ar": "\u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0645\u0633\u062a\u0645\u0631", "eg": "We were reading when the bell rang."}];
    const READING = ["Long ago, people mainly survived by farming and raising animals.", "Discovering writing helped people communicate and record ideas.", "Modern technology allows quick communication and travel.", "Learning from the past has great value for the future.", "We were walking along the river when the bell rang.", "At two o\u2019clock, the guide arrived and the tour started."];
    const MCQ = [{"q": "Writing helped people _____ across the world.", "opts": ["communicate", "interrupt", "arrive", "survive"], "a": 0}, {"q": "Modern _____ allows quick communication and travel.", "opts": ["progress", "technology", "accident", "past"], "a": 1}, {"q": "We were walking along the river when the bell _____.", "opts": ["was ringing", "rang", "rings", "ring"], "a": 1}, {"q": "He had an _____ on the way to work.", "opts": ["accident", "arrive", "interrupt", "progress"], "a": 0}, {"q": "Learning from the _____ has value for the future.", "opts": ["past", "technology", "accident", "river"], "a": 0}];
    const GRAMMAR = [{"q": "I ____ a book when the doorbell rang.", "opts": ["read", "was reading", "reads", "reading"], "a": 1, "tip": "Long action \u2192 Past Continuous."}, {"q": "They ____ chess while their parents were talking.", "opts": ["played", "were playing", "plays", "was playing"], "a": 0, "tip": "Completed action \u2192 Past Simple."}, {"q": "While we ____ along the Nile, we met a friendly guide.", "opts": ["walked", "were walking", "was walking", "walk"], "a": 1, "tip": "After 'While' use Past Continuous."}, {"q": "The teacher ____ when we were studying.", "opts": ["arrived", "was arriving", "arrive", "arrives"], "a": 0, "tip": "Short interrupting action \u2192 Past Simple."}, {"q": "When the phone rang, Sami ____ the TV.", "opts": ["was watching", "watch", "watched", "was watch"], "a": 0, "tip": "'When' + Past Simple \u2192 other action in Past Continuous."}];

    const ALLOW=[/google\s+uk\s+english/i,/microsoft\s+hazel/i,/microsoft\s+george/i,/en-GB/i];
    let voiceGB=null; const rate=document.getElementById('rate');
    function listVoices(){ const sel=document.getElementById('voiceSel'); sel.innerHTML=''; const all=speechSynthesis.getVoices(); const gb=all.filter(v=>/en-GB/i.test(v.lang)&&ALLOW.some(r=>r.test(v.name))); const warn=document.getElementById('warn'); if(!gb.length){warn.style.display='block'; voiceGB=null; return;} warn.style.display='none'; gb.forEach((v,i)=>{ const o=document.createElement('option'); o.value=i; o.textContent = v.name + ' (' + v.lang + ')'; sel.appendChild(o); }); voiceGB=gb[0]; sel.selectedIndex=0; sel.onchange=()=>voiceGB=gb[sel.selectedIndex]; }
    window.speechSynthesis.onvoiceschanged=listVoices; listVoices();
    function speak(t){ if(!voiceGB) return; const u=new SpeechSynthesisUtterance(t); u.voice=voiceGB; u.rate=parseFloat(rate.value||'0.85'); u.pitch=1.02; speechSynthesis.speak(u); }
    document.getElementById('testVoice').onclick=()=>speak('British English voice test');

    function cheer(){ const ctx=new (window.AudioContext||window.webkitAudioContext)(); const o=ctx.createOscillator(); const g=ctx.createGain(); o.type='triangle'; o.frequency.value=660; g.gain.value=0.08; o.connect(g); g.connect(ctx.destination); o.start(); setTimeout(()=>{o.frequency.value=990},150); setTimeout(()=>{o.stop(); ctx.close()},350); }

    document.querySelectorAll('.tab-btn').forEach(btn=>{ btn.addEventListener('click',()=>{ document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active')); document.querySelectorAll('main section').forEach(s=>s.classList.remove('active')); btn.classList.add('active'); document.getElementById(btn.dataset.tab).classList.add('active'); }); });

    const cards=document.getElementById('cards');
    WORDS.forEach(w=>{ const c=document.createElement('div'); c.className='card'; c.innerHTML='<div class="row"><span class="pill en">'+w.en+'</span><button class="btn muted">ðŸ”ˆ Word</button><button class="btn secondary">ðŸ”ˆ Example</button></div><p class="small"><span class="pill ar">'+w.ar+'</span></p><p>'+w.eg+'</p>'; const btns=c.querySelectorAll('button'); btns[0].onclick=()=>speak(w.en); btns[1].onclick=()=>speak(w.eg); cards.appendChild(c); });

    const dict=document.getElementById('dict');
    WORDS.slice(0,10).forEach((w,i)=>{ const row=document.createElement('div'); row.className='dict-row'; row.innerHTML='<div><strong>'+(i+1)+'.</strong> Meaning: <span class="pill ar">'+w.ar+'</span></div><div><input type="text" placeholder="Type English here" /></div>'; const inp=row.querySelector('input'); inp.addEventListener('change',()=>{ const ok=inp.value.trim().toLowerCase()===w.en.toLowerCase(); inp.classList.remove('good','bad'); inp.classList.add(ok?'good':'bad'); if(ok){cheer(); speak('Great! Correct: '+w.en)} else {speak('Try again.')} }); dict.appendChild(row); });

    const ddE=document.getElementById('dd-en'); const ddA=document.getElementById('dd-ar'); let ddScore=0; function buildDD(){ ddScore=0; ddE.innerHTML=''; ddA.innerHTML=''; const sh=[...WORDS].sort(()=>Math.random()-0.5).slice(0,8); sh.forEach((w,idx)=>{ const chip=document.createElement('div'); chip.className='chip'; chip.draggable=true; chip.dataset.key=idx; chip.textContent=w.en; chip.addEventListener('dragstart',ev=>{ev.dataTransfer.setData('text',idx)}); ddE.appendChild(chip); }); sh.forEach((w,idx)=>{ const holder=document.createElement('div'); holder.className='drop'; holder.dataset.key=idx; holder.innerHTML='<div class="small">'+w.ar+'</div>'; holder.addEventListener('dragover',ev=>ev.preventDefault()); holder.addEventListener('drop',ev=>{ const k=ev.dataTransfer.getData('text'); if(k==holder.dataset.key){ const chip=[...ddE.querySelectorAll('.chip')].find(c=>c.dataset.key==k); if(chip && chip.dataset.done!=='1'){ chip.dataset.done='1'; holder.appendChild(chip.cloneNode(true)); holder.style.background='#ecfbf5'; holder.style.borderColor='#31c48d'; ddScore++; cheer(); speak('Correct match'); document.getElementById('dd-score').textContent='Score: '+ddScore+'/'+sh.length; } } else { holder.style.background='#feecec'; holder.style.borderColor='#ef4444'; speak('Not correct. Try again.'); setTimeout(()=>{holder.style.background='#fffbe6'; holder.style.borderColor='#ffcf5f'},600); } }); ddA.appendChild(holder); }); document.getElementById('dd-score').textContent='Score: 0/'+sh.length; }
    buildDD(); document.getElementById('resetDD').onclick=()=>buildDD();

    const mcqBox=document.getElementById('mcq'); MCQ.forEach((item,i)=>{ const wrap=document.createElement('div'); const q=document.createElement('div'); q.className='q'; q.textContent=(i+1)+'. '+item.q; wrap.appendChild(q); item.opts.forEach((t,idx)=>{ const o=document.createElement('div'); o.className='opt'; o.textContent=t; o.onclick=()=>{ if(o.classList.contains('correct')||o.classList.contains('wrong')) return; if(idx===item.a){ o.classList.add('correct'); cheer(); speak('Excellent!'); } else { o.classList.add('wrong'); speak('Incorrect. Correct answer: '+item.opts[item.a]); } }; wrap.appendChild(o); }); mcqBox.appendChild(wrap); });

    const rBox=document.getElementById('readingBox'); READING.forEach((s,idx)=>{ const d=document.createElement('div'); d.className='sentence'; d.innerHTML='<strong>'+(idx+1)+'.</strong> '+s+' <button class="btn muted" style="float:right">ðŸ”ˆ</button>'; d.querySelector('button').onclick=()=>speak(s); rBox.appendChild(d); });

    if(document.getElementById('gQuiz')){ const g=document.getElementById('gQuiz'); GRAMMAR.forEach((item,i)=>{ const wrap=document.createElement('div'); const q=document.createElement('div'); q.className='q'; q.textContent=(i+1)+'. '+item.q; wrap.appendChild(q); item.opts.forEach((t,idx)=>{ const o=document.createElement('div'); o.className='opt'; o.textContent=t; o.onclick=()=>{ if(idx===item.a){ o.classList.add('correct'); cheer(); speak('Well done!'); } else { o.classList.add('wrong'); speak('Wrong. Correct: '+item.opts[item.a]); const tip=document.createElement('div'); tip.className='small'; tip.textContent=item.tip||''; wrap.appendChild(tip);} }; wrap.appendChild(o); }); g.appendChild(wrap); }); }
  </script>
</body>
</html>
